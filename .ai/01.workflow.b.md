# 01.workflow.md

あなたは**必ず**以下の手順に従って進めてください。

1. タスクを端的に説明する
2. 仕様「.docs」から必要な情報を収集する
3. 必要に応じて、仕様のドメインの知識に不足が無いかを確認する
  4. もし問題があれば、これに取り組み、その結果を説明して「3」にもどる
5. 必要に応じて、仕様を更新する
  6. もし問題があれば、これに取り組み、その結果を説明して「5」にもどる
6. 必要に応じて、仕様の全体に矛盾や不整合がないか確認する
  7. もし問題があれば、これに取り組み、その結果を説明して「6」にもどる
8. 収集した情報を元にタスクの計画を修正して説明する
9. 作業の計画した内容に取り組む
10. テストを実行して結果を説明する
  11. もし問題がある場合は、これに取り組み、その結果を説明して「10」にもどる
12. 型の検査して結果を説明する
  13. もし問題がある場合は、これに取り組み、その結果を説明して「12」にもどる
14. 必要に応じて、考えうる改善点を作成し説明する
  15. もし改善点が存在する場合、これに取り組み、その結果を説明して「14」にもどる
16. リファクタリングを行う
17. タスクを完了する

## Memory System

Your memory resets between sessions. You rely on these files:

- `.docs/project/overview.md` - プロジェクト全体の概要と目的を記述
- `.docs/project/terms/README.md` - 用語集の概要説明とナビゲーション
- `.docs/project/terms/term1.md` - 個別の用語定義（1用語1ファイル）
- `.docs/project/terms/term2.md` - 個別の用語定義（1用語1ファイル）
- `.docs/project/products-map.md` - 製品・システム間の連携図と関係性説明
- `.docs/project/models/README.md` - 共有モデルの概要とナビゲーション
- `.docs/project/models/model1.md` - 複数製品で共有されるドメインモデルの定義
- `.docs/products/product-a/overview.md` - 製品Aの概要、目的、主要機能
- `.docs/products/product-a/models/README.md` - 製品A固有モデルの概要とナビゲーション
- `.docs/products/product-a/models/model1.md` - 製品A固有のドメインモデル定義
- `.docs/products/product-a/use-cases/README.md` - 製品Aユースケースの概要とナビゲーション
- `.docs/products/product-a/use-cases/use-case1.md` - 製品Aの個別ユースケース定義
- `.docs/products/product-a/notes/note1.md` - システムに取り込めない補足事項
- `.docs/products/product-b/overview.md` - 製品Bの概要、目的、主要機能

### 概要ファイル (overview.md)

プロジェクト全体または個別製品の概要を記述。

- 簡潔かつ明確に記述する
- 技術的詳細よりもビジネス価値に焦点を当てる
- 全体像を把握できるように記述する

```
# [プロジェクト/製品名] 概要

## 目的

[このプロジェクト/製品の主な目的と解決する課題]

## 主要機能

- [機能1]: [簡潔な説明]
- [機能2]: [簡潔な説明]
- [機能3]: [簡潔な説明]

## ステークホルダー

- [ステークホルダー1]: [関係性]
- [ステークホルダー2]: [関係性]

## ビジネス制約

- [制約1]
- [制約2]
```

### 用語定義ファイル (terms/*.md)

ドメイン固有の用語とその定義を記述。

- 定義は明確かつ簡潔に
- 専門家でなくても理解できる例を含める
- 一般的な用語との違いを明確にする
- 関連する他の用語へのリンクを含める

```
# [用語名]

## 定義
[用語の簡潔かつ正確な定義]

## 例
[用語の具体的な例や使用例]

## 補足説明
[必要に応じた補足情報]

## 関連用語
- [関連用語1]: [関係性の説明]
- [関連用語2]: [関係性の説明]
```

### モデル定義ファイル (models/*.md)

ドメインモデル（エンティティ、値オブジェクト、集約など）を定義。

- モデルの種類（エンティティ、値オブジェクト、集約）を明示する
- 属性には型情報と制約を含める
- ビジネスルールは明確かつ検証可能な形で記述する
- 他のモデルとの関係性を明示する

```
# [モデル名]

[モデルの役割と目的の説明]

## 属性

### [属性名]

[属性の役割と目的の説明]

## ビジネスルール

- [ルール1]
- [ルール2]
```

### ユースケース定義ファイル (use-cases/*.md)

システムの利用シナリオと動作を記述。

- フローは明確な番号付きステップで記述する
- 代替フローは条件ごとに分けて記述する
- 使用するドメインモデルへの参照を含める
- エッジケースや例外も考慮する

```
# [ユースケース名]

[ユースケースの目的と概要を1-2文で]

1. [主語]が[アクション]する
2. [主語]が[アクション]する
    If ([条件]) Then
      [条件成立時の処理]
    Else
      [条件不成立時の処理]
    EndIf
3. [次のステップ]
```

必要に応じて、以下の質問を使ってユースケースの詳細を引き出してください:

1. このユースケースの目的は何ですか？
2. 通常のシナリオでは具体的にどのような流れになりますか？
3. どのような条件分岐が考えられますか？
4. 複雑な例外処理が必要なケースはありますか？
