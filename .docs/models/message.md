# メッセージモデル

メッセージモデルは、AIアシスタントとユーザー間で交換されるチャットメッセージを表現します。テキスト、コードブロック、ツール使用などの情報を含み、会話の履歴を構成します。

## 属性

### 識別子

メッセージの一意識別子です。会話内の各メッセージを一意に識別するために使用されます。

### 役割

メッセージの送信者を示します。'ユーザー'（ユーザーからのメッセージ）または'アシスタント'（AIアシスタントからのメッセージ）のいずれかの値を取ります。

### 内容

メッセージの内容を表すオブジェクトです。テキストやコードブロックなどの実際のメッセージ内容を保持します。

### 送信日時

メッセージが送信された日時を示します。会話の時系列を管理するために使用されます。

### プロジェクト識別子

メッセージが関連するプロジェクトの識別子です。メッセージがどのプロジェクトのコンテキストで作成されたかを示します。

## メッセージ内容型

### テキスト

メッセージの主要なテキスト内容を表します。メッセージの基本的な情報を提供します。

### ブロック

メッセージ内の構造化された内容を表します。テキスト、コード、ツール使用、思考プロセスなどの特殊な内容ブロックが含まれます。

## メッセージブロック型

### 種類

ブロックの種類を示します。'テキスト'（通常のテキスト）、'コード'（コードスニペット）、'ツール'（ツール使用）、'思考'（思考プロセス）のいずれかの値を取ります。

### 内容

ブロックの実際の内容を表します。種類に応じて、テキスト、コード、ツール使用の詳細、思考内容などが含まれます。

### 言語

コードブロックのプログラミング言語を示します。種類が'コード'の場合にのみ必須となり、シンタックスハイライトなどの表示制御に使用されます。

### ツール名

使用されたツールの名前を示します。種類が'ツール'の場合にのみ必須となり、実行されたツールを識別するために使用されます。

### ツールパラメータ

ツールに渡されたパラメータを保持します。種類が'ツール'の場合にのみ必須となり、ツール実行の詳細情報を提供します。

## ビジネスルール

- メッセージは空であってはならない
- ユーザーメッセージとアシスタントメッセージは交互に配置される
- コードブロックは有効な言語識別子を持つ必要がある
- ツール使用は有効なツール名とパラメータを持つ必要がある
